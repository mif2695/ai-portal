name: Deploy to reg.ru FTP

on:
  push:
    branches: [ main ]  # –î–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ –≤–µ—Ç–∫—É main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    # –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
    - name: Checkout repository
      uses: actions/checkout@v3
    
    # –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    # –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    - name: Install dependencies
      run: npm install
    
    # –®–∞–≥ 4: –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
    - name: Build project
      run: npm run build
    
    # –®–∞–≥ 5: –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ FTP
    - name: Deploy to FTP
      uses: SamKirkland/FTP-Deploy-Action@4.3.4
      with:
        server: ${{ secrets.FTP_SERVER }}
        username: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        local-dir: ./dist/
        server-dir: /public_html/
```

---

## **–®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. –ù–∞–∂–º–∏—Ç–µ **"New repository secret"**
4. –î–æ–±–∞–≤—å—Ç–µ **—Ç—Ä–∏ —Å–µ–∫—Ä–µ—Ç–∞**:

### –°–µ–∫—Ä–µ—Ç 1: `FTP_SERVER`
```
–ù–∞–∑–≤–∞–Ω–∏–µ: FTP_SERVER
–ó–Ω–∞—á–µ–Ω–∏–µ: ftp.–≤–∞—à-–¥–æ–º–µ–Ω.ru
```
(–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –∏–∑ reg.ru)

### –°–µ–∫—Ä–µ—Ç 2: `FTP_USERNAME`
```
–ù–∞–∑–≤–∞–Ω–∏–µ: FTP_USERNAME
–ó–Ω–∞—á–µ–Ω–∏–µ: –≤–∞—à_ftp_–ª–æ–≥–∏–Ω
```

### –°–µ–∫—Ä–µ—Ç 3: `FTP_PASSWORD`
```
–ù–∞–∑–≤–∞–Ω–∏–µ: FTP_PASSWORD
–ó–Ω–∞—á–µ–Ω–∏–µ: –≤–∞—à_ftp_–ø–∞—Ä–æ–ª—å
```

---

## **–®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –Ω–∞ GitHub**

### –ß–µ—Ä–µ–∑ VS Code:

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `.github/workflows/`
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `deploy.yml` —Å –∫–æ–¥–æ–º –≤—ã—à–µ
3. –°–¥–µ–ª–∞–π—Ç–µ –∫–æ–º–º–∏—Ç:
```
   git add .
   git commit -m "Add GitHub Actions deploy"
   git push
```

### –ò–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å GitHub:

1. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí **Add file** ‚Üí **Create new file**
2. –ò–º—è —Ñ–∞–π–ª–∞: `.github/workflows/deploy.yml`
3. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥
4. **Commit changes**

---

## **–®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–µ–ø–ª–æ–π**

–ü–æ—Å–ª–µ Push:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Actions**
2. –£–≤–∏–¥–∏—Ç–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π workflow "Deploy to reg.ru FTP"
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
4. –ï—Å–ª–∏ –≤—Å—ë –∑–µ–ª—ë–Ω–æ–µ ‚úÖ - —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ FTP!

---

## üéâ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```
1. –í—ã –¥–µ–ª–∞–µ—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
   ‚Üì
2. git push –≤ GitHub
   ‚Üì
3. GitHub Actions –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   ‚Üì
4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   ‚Üì
5. –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç (npm run build)
   ‚Üì
6. –ó–∞–≥—Ä—É–∂–∞–µ—Ç dist/ –Ω–∞ FTP reg.ru
   ‚Üì
7. –í–∞—à —Å–∞–π—Ç –æ–±–Ω–æ–≤–ª—ë–Ω! üöÄ
```

---

## üìä –ü—Ä–∏–º–µ—Ä workflow –≤ –¥–µ–π—Å—Ç–≤–∏–∏:

–ü–æ—Å–ª–µ Push –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ Actions:
```
‚úÖ Checkout repository
‚úÖ Setup Node.js
‚úÖ Install dependencies
‚úÖ Build project
‚úÖ Deploy to FTP